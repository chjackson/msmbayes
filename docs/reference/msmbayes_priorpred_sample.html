<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generate a dataset from the prior predictive distribution in a msmbayes model — msmbayes_priorpred_sample • msmbayes</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a dataset from the prior predictive distribution in a msmbayes model — msmbayes_priorpred_sample"><meta property="og:description" content="This generates a single sample of parameters from the prior, then
generates observed states from a multi-state model with those
parameters.  The data argument should contain the time and
subject indicators at which states are to be simulated (by default),
or the maximum observation time (if complete_obs=FALSE)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">msmbayes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/examples.html">Examples of using msmbayes</a>
    </li>
    <li>
      <a href="../articles/misclass.html">Misclassification multi-state models in msmbayes</a>
    </li>
    <li>
      <a href="../articles/semimarkov.html">Semi-Markov models with msmbayes</a>
    </li>
    <li>
      <a href="../articles/nphase.html">Advanced phase-type models in msmbayes</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/chjackson/msmbayes/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a dataset from the prior predictive distribution in a msmbayes model</h1>
    <small class="dont-index">Source: <a href="https://github.com/chjackson/msmbayes/blob/HEAD/R/prior_sample.R" class="external-link"><code>R/prior_sample.R</code></a></small>
    <div class="hidden name"><code>msmbayes_priorpred_sample.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This generates a single sample of parameters from the prior, then
generates observed states from a multi-state model with those
parameters.  The <code>data</code> argument should contain the time and
subject indicators at which states are to be simulated (by default),
or the maximum observation time (if <code>complete_obs=FALSE</code>).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">msmbayes_priorpred_sample</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  state <span class="op">=</span> <span class="st">"state"</span>,</span>
<span>  time <span class="op">=</span> <span class="st">"time"</span>,</span>
<span>  subject <span class="op">=</span> <span class="st">"subject"</span>,</span>
<span>  <span class="va">Q</span>,</span>
<span>  covariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pastates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pafamily <span class="op">=</span> <span class="st">"weibull"</span>,</span>
<span>  paspline <span class="op">=</span> <span class="st">"linear"</span>,</span>
<span>  nphase <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  E <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  priors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  complete_obs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cov_format <span class="op">=</span> <span class="st">"orig"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame giving the observed data.</p></dd>


<dt id="arg-state">state<a class="anchor" aria-label="anchor" href="#arg-state"></a></dt>
<dd><p>Character string naming the observed state variable in
the data.  This variable must either be an integer in 1,2,...,K,
where K is the number of states, or a factor with these integers
as level labels.  If omitted, this is assumed to be <code>"state"</code>.</p></dd>


<dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>Character string naming the observation time variable in the data.
If omitted, this is assumed to be <code>"time"</code>.</p></dd>


<dt id="arg-subject">subject<a class="anchor" aria-label="anchor" href="#arg-subject"></a></dt>
<dd><p>Character string naming the individual ID variable in the data.
If omitted, this is assumed to be <code>"subject"</code>.</p></dd>


<dt id="arg-q">Q<a class="anchor" aria-label="anchor" href="#arg-q"></a></dt>
<dd><p>Matrix indicating the transition structure.  A zero entry
indicates that instantaneous transitions from (row) to (column)
are disallowed.  An entry of 1 (or any other positive value)
indicates that the instantaneous transition is allowed.  The
diagonal of <code>Q</code> is ignored.</p>
<p>There is no need to "guess" initial values and put them here, as
is sometimes done in <code>msm</code>.  Initial values for fitting are
determined by Stan from the prior distributions, and the specific
values supplied for positive entries of <code>Q</code> are disregarded.</p></dd>


<dt id="arg-covariates">covariates<a class="anchor" aria-label="anchor" href="#arg-covariates"></a></dt>
<dd><p>Specification of covariates on transition intensities.
This should be a list of formulae.  Each formula should have a
left-hand side that looks like <code>Q(r,s)</code>, and a right hand side
defining the regression model for the log of the transition intensity
from state \(r\) to state \(s\).</p>
<p>For example,</p>
<p><code>covariates = list(Q(1,2) ~ age + sex,
                        Q(2,1) ~ age)</code></p>
<p>specifies that the log of the 1-2 transition intensity is an additive
linear function of age and sex, and the log 2-1 transition intensity
is a linear function of age.  You do not have to list all of the
intensities here if some of them are not influenced by covariates.</p>
<p>In models with phase-type approximated
states (specified with <code>pastates</code>), as in standard Markov models, the
numbers inside <code>Q()</code> refer
to the observed state space.  For such phase-type models, the
covariate has an identical multiplicative effect on all rates of
transition between phases for a given states.</p>
<p>In phase-type models specified with <code>nphase</code>, or misclassification
models (specified with <code>E</code>), the numbers in <code>Q()</code> refer to transition
rates on the latent state space.</p></dd>


<dt id="arg-pastates">pastates<a class="anchor" aria-label="anchor" href="#arg-pastates"></a></dt>
<dd><p>This indicates which states (if any) are given a
Weibull or Gamma sojourn distribution approximated by a 5-phase
model.
Ignored if <code>nphase</code> is supplied.</p></dd>


<dt id="arg-pafamily">pafamily<a class="anchor" aria-label="anchor" href="#arg-pafamily"></a></dt>
<dd><p><code>"weibull"</code> or <code>"gamma"</code>, indicating the
approximated sojourn distribution in the phased state.  Either a
vector of the same length as <code>pastates</code>, or just one to apply to
all states.</p></dd>


<dt id="arg-paspline">paspline<a class="anchor" aria-label="anchor" href="#arg-paspline"></a></dt>
<dd><p><code>"linear"</code> or <code>"hermite"</code>. Advanced: spline
used in constructing the approximations. May remove this argument
if one of these turns out to be good enough.</p></dd>


<dt id="arg-nphase">nphase<a class="anchor" aria-label="anchor" href="#arg-nphase"></a></dt>
<dd><p>Only required for models with phase-type sojourn
distributions specified manually (not through <code>pastates</code>).
<code>nphase</code> is a vector with one element per state, giving the
number of phases per state.  This element is 1 for states that do
not have phase-type sojourn distributions.</p></dd>


<dt id="arg-e">E<a class="anchor" aria-label="anchor" href="#arg-e"></a></dt>
<dd><p>By default, <code>msmbayes</code> fits a (non-hidden) Markov model.
If <code>E</code> is supplied, then a Markov model with misclassification is
fitted, a type of hidden Markov model.  <code>E</code> should then be a
matrix indicating the structure of allowed misclassifications,
where rows are the true states, and columns are the observed
states.  A zero entry in row \(r\) and column \(s\) indicates
that true state \(r\) cannot be observed as state
\(s\).  A non-zero \((r,s)\) entry indicates that true state
\(r\) may be misclassified as \(s\). The diagonal of <code>E</code>
is ignored.</p></dd>


<dt id="arg-priors">priors<a class="anchor" aria-label="anchor" href="#arg-priors"></a></dt>
<dd><p>A list specifying priors.  Each component should be
the result of a call to <code><a href="msmprior.html">msmprior</a></code>.  Any parameters
with priors not specified here are given default priors: normal
with mean -2 and SD 2 for log intensities, normal with mean
0 and SD 10 for log hazard ratios, or normal(0,1) for all others
(log shape, log scale and log odds parameters in
phase-type approximation and misclassification models).  See
<code><a href="msmprior.html">msmprior</a></code> for more details.</p>
<p>If only one parameter is given a non-default prior, a single <code>msmprior</code>
call can be supplied here instead of a list.</p></dd>


<dt id="arg-complete-obs">complete_obs<a class="anchor" aria-label="anchor" href="#arg-complete-obs"></a></dt>
<dd><p>If <code>complete_obs=FALSE</code> (the default)
intermittently-observed states are generated for the subjects
and times supplied in the <code>data</code> argument, using
<code><a href="https://chjackson.github.io/msm/reference/simmulti.msm.html" class="external-link">msm::simmulti.msm</a></code>.  The returned object is a data frame
made by appending these states to <code>data</code>.</p>
<p>If <code>complete_obs=TRUE</code>, one complete state transition history
is generated using <code><a href="https://chjackson.github.io/msm/reference/sim.msm.html" class="external-link">msm::sim.msm</a></code>.  The <code>data</code> argument
should then consist of one row, with <code>time</code> giving the maximum
observation time, and any covariates supplied, assumed to be
time-constant.  The returned object is a list.</p></dd>


<dt id="arg-cov-format">cov_format<a class="anchor" aria-label="anchor" href="#arg-cov-format"></a></dt>
<dd><p>If <code>"orig"</code> the covariates are in their
original form that they were supplied as.  If <code>"design"</code>
(or any other value) the covariates are returned as a design
matrix, i.e. with factors converted to numeric contrasts.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame or a list, see <code><a href="https://chjackson.github.io/msm/reference/simmulti.msm.html" class="external-link">msm::simmulti.msm</a></code> or <code><a href="https://chjackson.github.io/msm/reference/sim.msm.html" class="external-link">msm::sim.msm</a></code> respectively.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>For phase-type approximation models, this simulates from the
phase-type approximation, not the Weibull or Gamma (e.g) distribution
that it is designed to approximate.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Christopher Jackson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

