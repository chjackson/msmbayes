<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Constructor for a prior distribution in msmbayes — msmprior • msmbayes</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Constructor for a prior distribution in msmbayes — msmprior"><meta name="description" content="Constructor for a prior distribution in msmbayes"><meta property="og:description" content="Constructor for a prior distribution in msmbayes"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">msmbayes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/examples.html">Examples of using msmbayes</a></li>
    <li><a class="dropdown-item" href="../articles/misclass.html">Misclassification multi-state models in msmbayes</a></li>
    <li><a class="dropdown-item" href="../articles/semimarkov.html">Semi-Markov models with msmbayes</a></li>
    <li><a class="dropdown-item" href="../articles/nphase.html">Advanced phase-type models in msmbayes</a></li>
    <li><a class="dropdown-item" href="../articles/cognitive.html">Code for using the msmbayes package for semi-Markov modelling in an application to cognitive function</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/chjackson/msmbayes/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Constructor for a prior distribution in msmbayes</h1>
      <small class="dont-index">Source: <a href="https://github.com/chjackson/msmbayes/blob/HEAD/R/priors.R" class="external-link"><code>R/priors.R</code></a></small>
      <div class="d-none name"><code>msmprior.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Constructor for a prior distribution in msmbayes</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">msmprior</span><span class="op">(</span></span>
<span>  <span class="va">par</span>,</span>
<span>  mean <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sd <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  median <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lower <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  upper <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-par">par<a class="anchor" aria-label="anchor" href="#arg-par"></a></dt>
<dd><p>Character string indicating the model parameter to place
the prior on.  This should start with one of the following:</p>
<p><code>"logq"</code>.  Log transition intensity.  It should then two include indices
indicating the transition, e.g. <code>"logq(2,3)"</code> for the log
transition intensity from state 2 to state 3.</p>
<p><code>"q"</code>, Transition intensity (in the same format)</p>
<p><code>"time"</code>. Defined as <code>1/q</code>.  This can be interpreted as the mean
time to the next transition to state \(s\) for people in state \(r\)
(from the point of view of someone observing one person at a time,
and switching to observing a different person if a competing
transition happens).  The same format as <code>logq</code> and <code>q</code> with two indices.</p>
<p><code>"loghr"</code>. Covariate effect on intensities of transition from
states given a Markov model. The covariate name is supplied
alongside the transition indices, e.g. <code>"loghr(age,2,3)"</code> for the
effect of <code>age</code> on the log hazard ratio of transitioning from state
2 to state 3.  For factor covariates, this should include the
level, e.g. <code>"loghr(sexMALE,2,3)"</code> for level <code>"MALE"</code> of factor
<code>"sex"</code>.</p>
<p><code>"logtaf"</code>. Covariate effect on the sojourn time in states given a
semi-Markov model with a phase-type approximation.  This is
specified with only one index, indicating the state,
e.g. <code>"loghr(age,2)"</code>.  Note this is interpreted as a log hazard
ratio for times to transitions on the latent space, but for the
sojourn time on the observable space, this is a
"time acceleration factor", such that an coefficent of log(2)
increases the risk of the next transition through halving the
expected sojourn time.</p>
<p><code>"hr"</code>. Hazard ratio.</p>
<p><code>"loe"</code> Log odds of error (relative to no misclassification).
<code>"loe(1,2)"</code> indicates the log odds of misclassification in state 2
for true state 1, relative to no misclassifiation.</p>
<p><code>"logshape"</code> <code>"logscale"</code> Log shape or scale parameter for the
sojourn distribution in a phase-type approximation model.
The index indicates the state,
e.g. <code>logshape(2)</code> and <code>logscale(2)</code> indicate the log shape and
scale parameter for the sojourn distribution in state 2.</p>
<p><code>"logoddsnext"</code>.  Log odds of transition to a destination state in a
phase-type approximation model with competing destination states.
These parameters are only used in phase-type approximation
models where there are multiple potential states that an individual
could transition to immediately on leaving the state that has a
phase-type approximation sojourn distribution.  These parameters
are defined with two indices.  For example, <code>logoddsnext(1,2)</code> is the log
odds of transition to state 2 on leaving state 1.  The odds
is the probability of transition to state 2 divided by the
probability of transition to the first out of the set of potential
destination states.</p>
<p>Covariate effects on competing transitions out of semi-Markov
states are specified with <code>logrrnext</code>.  For example,
<code>"logrrnext(age,2,3)"</code> for the effect of <code>age</code> on the relative rate of
transition from state 2 to state 3, relative to the rate of
transition from state 2 to the first competing destination state.
These parameters are not applicable to semi-Markov states with only
one potential next destination state.</p>
<p>In general, the indices or the covariate name can be omitted to indicate that
the same prior will used for all transitions, or/and all
covariates.  This can be done with or without the brackets, e.g.
<code>"logq()"</code> or <code>"logq"</code> are both understood.</p></dd>


<dt id="arg-mean">mean<a class="anchor" aria-label="anchor" href="#arg-mean"></a></dt>
<dd><p>Prior mean.  This is only used for the parameters that have direct normal priors, that is <code>logq</code>, <code>loghr</code>, <code>logtaf</code>, <code>logshape</code>, <code>logscale</code>, <code>loe</code>, <code>logoddsnext</code>.  That is, excluding <code>time</code>, <code>q</code> and <code>hr</code>, whose priors are defined by transformations of a normal distribution.</p></dd>


<dt id="arg-sd">sd<a class="anchor" aria-label="anchor" href="#arg-sd"></a></dt>
<dd><p>Prior standard deviation (only for parameters with direct normal priors)</p></dd>


<dt id="arg-median">median<a class="anchor" aria-label="anchor" href="#arg-median"></a></dt>
<dd><p>Prior median</p></dd>


<dt id="arg-lower">lower<a class="anchor" aria-label="anchor" href="#arg-lower"></a></dt>
<dd><p>Prior lower 95% quantile</p></dd>


<dt id="arg-upper">upper<a class="anchor" aria-label="anchor" href="#arg-upper"></a></dt>
<dd><p>Prior upper 95% quantile</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of class <code>"msmprior"</code>, with components</p>
<p><code>par</code> (as supplied by the user)</p>
<p><code>par_base</code> (e.g. <code>"logq"</code> if <code>"time"</code> was provided, or <code>"loghr"</code> if <code>"hr"</code> was provided)</p>
<p><code>covname</code> (name of covariate effect)</p>
<p><code>ind1</code>, <code>ind2</code> (as supplied by the user)</p>
<p><code>mean</code> (of log-normal prior on <code>par_base</code>)</p>
<p><code>sd</code>  (of log-normal prior on <code>par_base</code>)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>In <code>msmbayes</code>, a normal prior is used for the log
transition intensities (<code>logq</code>) and log hazard ratios (<code>loghr</code>).
The goal of this function is to determine the mean and SD of this
prior.  It can be used in two ways:</p>
<p>(a) directly specifying the prior mean and SD of <code>logq or </code>loghr`</p>
<p>(b) specifying prior quantiles for more interpretable
transformations of these.  These may include <code>q</code> (the transition
intensity) or <code>time</code> (the reciprocal of the intensity,
interpreted as a mean time to this transition when observing a
sequence of individuals at risk of it).  Or <code>hr</code> (hazard ratio)</p>
<p>Two quantiles (out of the median, lower or upper) should be provided.
If all three are provided, then the upper quantile is ignored.  These
are transformed back to the scale of <code>logq</code> or <code>loghr</code>, and the
unique normal prior with these quantiles is deduced.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">priors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="fu">msmprior</span><span class="op">(</span><span class="st">"logq(1,2)"</span>, median<span class="op">=</span><span class="op">-</span><span class="fl">2</span>, lower<span class="op">=</span><span class="op">-</span><span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   <span class="fu">msmprior</span><span class="op">(</span><span class="st">"q(2,1)"</span>,    median<span class="op">=</span><span class="fl">0.1</span>, upper<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Q</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="msmbayes.html">msmbayes</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">infsim2</span>, state<span class="op">=</span><span class="st">"state"</span>, time<span class="op">=</span><span class="st">"months"</span>, subject<span class="op">=</span><span class="st">"subject"</span>,</span></span>
<span class="r-in"><span>                Q<span class="op">=</span><span class="va">Q</span>,  priors<span class="op">=</span><span class="va">priors</span>, fit_method<span class="op">=</span><span class="st">"optimize"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   name   from    to    posterior  mode prior_string                    prior</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;rvar[1d]&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;rvar[1d]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> q         1     2  0.62 <span style="color: #949494;">± 0.23</span> 0.578 0.14 (0.018, 1.0e+00)    0.23 <span style="color: #949494;">± 0.3</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> q         2     1  3.63 <span style="color: #949494;">± 1.33</span> 3.41  0.10 (0.001, 1.0e+01)    1.44 <span style="color: #949494;">± 9.4</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> mst       1    <span style="color: #BB0000;">NA</span>  1.83 <span style="color: #949494;">± 0.68</span> 1.73  10.0 (0.1, 998)        143.84 <span style="color: #949494;">± 942.0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> mst       2    <span style="color: #BB0000;">NA</span>  0.31 <span style="color: #949494;">± 0.11</span> 0.293 7.4 (1.0, 55)           12.41 <span style="color: #949494;">± 16.2</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Jackson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

